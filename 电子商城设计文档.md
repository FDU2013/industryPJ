# 电子商城设计文档

### 功能概述

#### ==登录界面==

不管是用户还是平台管理端，都通过一个界面登录，这个界面登录上去之后，response里面有role的信息，role为admin则进入平台管理端，role为user则进入用户端。

session里面要存：username，role，token

这也就意味着，如果直接访问admin 或者 user 相关的界面，session里面 没有相关role等信息的话，要被拦截

#### ==用户（User）：==

4个界面

##### 界面一：查看商品（默认界面）

搜索+筛选（有一个Type信息）查看商品（分页），可以对搜索结果进行按照价格排序（升序、降序）或者商品编号排序（排序在前端做还是后端做？），右边可以选择**立即购买**or**加入购物车**。

##### 界面二：查看购物车

可以看到**余额**以及购物车信息，下方还要有汇总信息，一共多少钱。（不设计优惠券和打折）

##### 界面三：查看订单

对于订单（有三种，未发货、待收货、已完成，可以是三个按钮or一个选项之类的，也可以是三个类似界面，点一个看一类）：可以分页查看，**待收货可以确认收货**

##### 界面四：查看个人信息

里面可以看到账户相关的信息，以及自己的余额（不可修改，不提供充值按钮）。

地址维护

修改密码

维护个人信息（真实姓名，邮箱）

##### 界面五：评价界面

有可评价和已评价

每一条评价会显示是哪个订单的哪个物品及数量（maybe有个时间）



#### ==平台管理端（Admin）==

##### 界面一：管理商品

搜索+筛选（有一个Type信息）查看商品（分页），右边可以选择**删除**or**修改商品信息**。

右上角有个按钮可以增加商品

##### 界面二：管理用户

可以搜索+分页查看用户，可以看到用户密码，右边有两个按钮：充值、修改密码

添加用户

##### 界面三：订单管理

对于订单（有三种，未发货、待收货、已完成，可以是三个按钮or一个选项之类的，也可以是三个类似界面，点一个看一类）：可以分页查看，**未发货可以确认发货**，要求填写一个物流信息（一个简单的string）

****

### 设计风格（前后端交互）

接口调用使用Restful的风格。

所有的**response都是data+code+msg**。

code为200表示请求成功，使用data中的数据，如果code不是200，则弹出一个表示失败的弹窗，并显示msg的内容

除了登录以外，**所有的request**都需要在Header中携带auth=token，username=username。role不用携带，但是建议保存在session中，用于前端界面路由筛选。

request的Body如果携带多个参数，就把多个参数以结构体的方式在JSON中打包传送，如果只有一个参数，则直接以键值对的方式传输

**所有的请求都使用POST的方式**，不刻意区分delete、post、get、update

****

### 接口文档（前后端）

#### 1.登录

>POST请求：/auth/login

header里面可以不携带东西

在RequestBody里面携带JSON类型的数据

```JSON
{
    "username": "admin",
    "password": "admin"
}
```

成功样例的Response的Body

```JSON
{
    "code": 200,
    "msg": "登录成功",
    "data": {
        "username": "admin",
        "role": "admin",
        "token": "aa",
        "refreshToken": "aa"
    }
}
```

失败样例的Response的Body

```json
{
    "code": 1000,
    "msg": "登录失败",
    "data": null
}
```

#### 2.用户查看个人信息

> /user/info

header中携带好username和token，Body中不需要参数

```JSON
{
    "code": 200,
    "msg": "登录成功",
    "data": {
        "username": "admin",
        "role": "admin",
        "token": "aa",
        "refreshToken": "aa"
    }
}
```



****

### 数据库设计（后端）

##### authservice

account：id password role status(表示是否过期)

##### userservice

user：userid, mail phone name

address: userid location(可拓展到省市区) description

shoplist: userid good_id, num

##### moneyservie

money：userid money_num

##### adminservice

admin: adminid, phone, mail, name

##### shopservice

type：type_id, type_name

good：good_id, good_name, image_url, description, price, type_id(考虑丰富，要不要有一个单独的商品详情页)

order: order_id, userid, address, total_price, //description(在这里描述商品+数量这个数组), 备注（买的时候填），adminid(谁发货的), delivery_no, 评价(已完成可以评价),下单时间。

order_detail:order_id, good_id, num,usernid ,评价,status

















****

### 微服务架构设计（后端）











****

### 小组成员分工















****



















